<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vume App-Login page</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="css/form.css">
</head>
<body>
  <div class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-md-6 form-container">
        <h2 class="text-center mb-4 title">Welcome Back !</h2>
        <form id="loginForm" class="form-horizontal">
          <div class="form-group mb-4">
            <label for="email">Email</label>
            <input type="email" class="form-control" id="email" required placeholder="Enemary@gmail.com">
          </div>
          <div class="form-group mb-4">
            <label for="matricNumber">Matriculation Number</label>
            <input type="text" class="form-control" id="matricNumber" required placeholder="FUHSO/U20/FS/000">
          </div>
          <div class="form-group mb-4">
            <label for="password">Password</label>
            <input type="password" class="form-control" id="password" required placeholder="***********">
          </div>

<!-- Links -->
<div class="d-flex justify-content-between mt-3 mb-4">
  <p class="description"> Don't have an account?<a href="register.html" class="description"> Signup</a></p>
  <p><a href="mailto:fuhsochat@gmail.com" class="description">Forgot password?</a></p>
</div>
          <button type="submit" class="btn signin">Login</button>
        </form>

      </div>
    </div>
  </div>

<br><br><br><br><br>
  <!-- Footer -->
  <footer class="footer mt-auto py-3 bg-light text-center">
    <div class="container">
      <span class="text-muted">&copy; 2024 Your Website. All rights reserved.</span>
    </div>
  </footer>


  <!-- JavaScript Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

  <!-- Firebase JavaScript SDK -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-analytics.js";
    import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";

    // Firebase configuration (same as in register.html)
    const firebaseConfig = {
        apiKey: "AIzaSyAoSe7Evs4G7kk8BQm7MYhNUi2j4Bw6G5Y",
authDomain: "vume-app.firebaseapp.com",
projectId: "vume-app",
storageBucket: "vume-app.appspot.com",
messagingSenderId: "1094619030202",
appId: "1:1094619030202:web:8c426018e29303bc9a9883",
measurementId: "G-8ML1XQJ5X0"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const auth = getAuth(app);

    // Event listener for login form submission
    document.getElementById('loginForm').addEventListener('submit', async (event) => {
      event.preventDefault();
      const email = document.getElementById('email').value;
      const matricNumber = document.getElementById('matricNumber').value;
      const password = document.getElementById('password').value;

      // Check if matric number is one of the allowed values
      const allowedMatricNumbers = ['FUHSO/U22/FS/002', 
      'FUHSO/U22/FS/0049',
      'FUHSO/U22/FS/0026',
      'FUHSO/U22/FS/0029',
      'FUHSO/U22/FS/0039',
      'FUHSO/U22/FS/0044',
      'FUHSO/U22/FS/0010',
      'FUHSO/U22/FS/0016',
      'FUHSO/U22/FS/0019',
      'FUHSO/U22/FS/0027',
      'FUHSO/U22/FS/0023',
      'FUHSO/U22/FS/0045',
      'FUHSO/U22/FS/0024',
      'FUHSO/U22/FS/0046',
      'FUHSO/U22/FS/0001',
      'FUHSO/U22/FS/0028',
      'FUHSO/U22/FS/0037',
      'FUHSO/U22/FS/0025',
      'FUHSO/U20/FS/072',
      'FUHSO/U20/FS/047',
      'FUHSO/U20/FS/029',
      'FUHSO/U20/FS/014',
      'FUHSO/U20/FS/057',
      'FUHSO/U20/FS/014',
      'FUHSO/U20/FS/064',
      'FUHSO/U20/FS/050',
      'FUHSO/U20/FS/068',
      'FUHSO/U20/FS/051',
      'FUHSO/U20/FS/039',
      'FUHSO/U20/FS/048',
      'FUHSO/U20/FS/005',
      'FUHSO/U20/FS/035',
      'FUHSO/U20/FS/047',
      'FUHSO/U21/FS/0006',
      'FUHSO/U21/FS/0002',
      'FUHSO/U21/FS/0003',
      'FUHSO/U21/FS/0012',
      'FUHSO/U21/FS/0010',
      'FUHSO/U21/FS/0004',
      'FUHSO/U20/002', 
      
      'FUHSO/U20/003'];
      if (!allowedMatricNumbers.includes(matricNumber)) {
        alert('Sorry this matric number is not registered or not typed correctly with an upper case!');
        return;
      }

      try {
        // Sign in user with email and password
        await signInWithEmailAndPassword(auth, email, password);
        // Redirect to main page on successful login
        window.location.href = 'main.html';
      } catch (error) {
        // Handle Firebase authentication errors
        console.error('Firebase Error:', error.code, error.message);
       alert(error.message); // Display error message to user
      }
    });
  </script>
</body>
</html>

