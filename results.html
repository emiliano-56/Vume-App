<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vume App-GPA, CGPA & Results</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <!-- Font Awesome CSS for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link rel="stylesheet" href="/css/main.css">
<link rel="stylesheet" href="/css/form.css">
<style>


.student-details {
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* 2 columns with equal width */
    gap: 10px; /* gap between grid items */
  /*   padding: 10px;  */
}

   .center-logo {
     text-align: center;
   }

#img{
    width: 25%;
    margin-right: auto;
    margin-left: auto;
    display: block;
    border-radius: 50%;
}


 </style>

</head>
<body>
  <!-- ====Top Navbar start here==== -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
      <!-- Hamburger Menu Icon -->
      <button class="navbar-toggler menu-toggle" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Logo -->
      <a class="navbar-brand" href="/main.html">Vume</a>
  <!-- ====Top Navbar start here==== -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark" id="top-navbar">
    <div class="container">
      
      <!-- Input Field (Centered) -->
      <div class="center-input d-flex justify-content-center flex-grow-1">
        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
      </div>

<!-- Profile Avatar with Dropdown -->
<div class="dropdown me">
  <img src="./img/avatar-icon.jpg" width="45" class="rounded-circle dropdown-toggle" id="avatarDropdown" data-bs-toggle="dropdown" aria-expanded="false" alt="User Avatar">
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="avatarDropdown">
    <li><label for="avatarInput" class="dropdown-item"><i class="fas fa-user-edit"></i> Change</label></li>
    <hr>
    <li><a class="dropdown-item" href="#" id="deleteAvatar"><i class="fas fa-user-edit"></i> Delete</a></li>
    <hr>
    <li><a class="dropdown-item text-danger" href="#" id="logout"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
  </ul>
</div>
<!-- Hidden avatar input -->
<input type="file" id="avatarInput" accept="image/jpeg, image/png" style="display: none;">

    </div>
  </nav>
<!--====Top navbar Ends====-->
 
    </div>


      <!-- Dark Mode Toggle -->
      <div class="collapse navbar-collapse small-navbar p-5" id="navbarNav">

        <ul class="navbar-nav ms-auto">
          <a href="/results.html">Check Results</a>
          <a href="/GPA.html">GPA Calculations</a>
          <a href="/cgpa.html">CGPA Calculations</a>
        </ul>
      </div>
    </div>
  </nav>
<!--====Top navbar Ends====-->

<!---===Main section starts here-->
 <div class="container mt-5 form-container">
    <div class="row justify-content-center form-horizontal">
      <div class="col-md-6">
        <h2 class="">Result Checker</h2>
        <p class="mb-4">Select and input your given token</p>
        <div class="form-group mb-4">
          <label for="level">Level:</label>
          <select class="form-control" id="level" required>
            <option value="">Select Level</option>
            <option value="100">100</option>
            <option value="200">200</option>
            <option value="300">300</option>
            <option value="400">400</option>
          </select>
        </div>
        <div class="form-group mb-4">
          <label for="semester">Semester:</label>
          <select class="form-control" id="semester" required>
            <option value="">Select Semester</option>
            <option value="first_semester">First Semester</option>
            <option value="second_semester">Second Semester</option>
          </select>
        </div>
        <div class="form-group mb-4">
          <label for="token">Token:</label>
          <input type="text" class="form-control" id="token" required>
        </div>
        <button type="button" class="btn btn-dark btn-block text-center p-0" id="submitBtn">Submit</button>
      </div>
    </div>
  </div>
  
  <!-- Bootstrap Modal -->
  <div class="modal fade" id="resultsModal" tabindex="-1" role="dialog" aria-labelledby="resultsModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title text-center" id="resultsModalLabel">Federal University of Health Sciences, Oturkpo</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <img src="/img/fuhso_logo.jpeg" alt="" class="mt-3" id="img">
        <div class="modal-body" id="resultsBody">
          <!-- Results will be displayed here -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" id="printBtn">Print</button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- jQuery and Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  
  <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
      import { getFirestore, collection, query, where, getDocs, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";
  
      // Your web app's Firebase configuration
      const firebaseConfig = {
        apiKey: "AIzaSyAoSe7Evs4G7kk8BQm7MYhNUi2j4Bw6G5Y",
  authDomain: "vume-app.firebaseapp.com",
  projectId: "vume-app",
  storageBucket: "vume-app.appspot.com",
  messagingSenderId: "1094619030202",
  appId: "1:1094619030202:web:8c426018e29303bc9a9883",
  measurementId: "G-8ML1XQJ5X0"
      };
  
      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const firestore = getFirestore(app);
  
      // Function to fetch and display results
      async function fetchResults() {
        const level = document.getElementById('level').value;
        const semester = document.getElementById('semester').value;
        const token = document.getElementById('token').value;
  
        // Query to find the document with the provided token
        const q = query(collection(firestore, 'students'), where('token', '==', token));
        
        // Get the document snapshot
        const querySnapshot = await getDocs(q);
        
        // Check if the document exists
        if (!querySnapshot.empty) {
          const studentDoc = querySnapshot.docs[0];
          const resultsRef = doc(firestore, 'students', studentDoc.id, 'results', semester);
          
          const resultsDoc = await getDoc(resultsRef);
          
          if (resultsDoc.exists()) {
            const resultsData = resultsDoc.data();
            
            let tableContent = `
              <div class="grid-container">
                <div class="student-details">
                  <p><strong>Name:</strong> ${studentDoc.data().name}</p>
                  <p><strong>Department:</strong> ${studentDoc.data().department}</p>
                  <p><strong>Level:</strong> ${studentDoc.data().Level}</p>
                  <p><strong>Academic Session:</strong> ${studentDoc.data().Academic_Session}</p>
                </div>
              </div>
              <table class="table mt-4">
                <thead>
                  <tr>
                    <th>Course Code</th>
                    <th>Credit Units</th>
                    <th>Grade</th>
                  </tr>
                </thead>
                <tbody>
            `;
            
            // Loop through courses and grades
            Object.entries(resultsData.courses).forEach(([courseCode, grade]) => {
              tableContent += `
                <tr>
                  <td>${grade.courseCode}</td>
                  <td>${grade.creditUnits}</td>
                  <td>${grade.grade}</td>
                </tr>
               
              `;
            });
            
            // Close the table
            tableContent += `
                </tbody>
              </table>
              <div class="gpa">
      <p><strong>GPA:</strong> ${studentDoc.data().gpa}</p>
    </div>
                <p>Confirmation: Please take this results to an exam officials of your department to be signed at the back
  
            `;
            
            // Show the results in the modal
            document.getElementById('resultsBody').innerHTML = tableContent;
            $('#resultsModal').modal('show');
          } else {
            alert('No results found for the provided semester.');
          }
        } else {
          alert('No results found for the provided token.');
        }
      }
  
      // Print function
      function printResults() {
        window.print();
      }
  
      // Add event listeners to submit and print buttons
      document.getElementById('submitBtn').addEventListener('click', fetchResults);
      document.getElementById('printBtn').addEventListener('click', printResults);
  </script>
  








<!----====Main section End-->
<br><br><br><br><br><br>
  <!--====Bottom Section Starts-->
  <!-- Bottom Navbar (visible on <=768px) -->
  <nav class="navbar navbar-dark bg-dark d-lg-none fixed-bottom ">
    <div class="container justify-content-around">
      <a class="navbar-brand brand-1" href="/main.html"><i class="fas fa-home"></i></a>
      <a class="navbar-brand" href="/GPA.html"> <i class="fas fa-graduation-cap "></i> </a>
      <a class="navbar-brand" href="/results.html"> <i class="fas fa-university "></i> </a>
    </div>
  </nav>
<!--=====Bottom Section Ends-->



<!-- Footer Section  Start -->
<footer class="footer">
  <div class="container">
    <p>&copy; 2024 Vume. All rights reserved.</p>
  </div>
</footer>
<!---=====Footer section Ends-->



<!---=====Js Code for user profiles-->
<script src="/javascript/userProfiles.js" type="module"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  <!-- Custom JavaScript -->
  <script src="/javascript/CGPA.js"></script>

<!-- Bootstrap Bundle with Popper -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>

<!-- FontAwesome Script -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>



</body>
</html>




















